<h1 class="text-xl font-semibold mb-4">Networks</h1>

<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
  <% @provider_accounts.each do |pa| %>
    <div class="rounded-md border bg-white p-5 shadow-sm">
      <div class="text-sm font-medium mb-1 uppercase"><%= pa.provider %></div>
      <div class="text-sm break-all"><%= pa.handle %></div>
      <% if (info = (pa.instance || pa.public_key)).present? %>
        <div class="text-xs text-gray-600 mt-1 break-all"><%= info %></div>
      <% end %>
      <div class="mt-3">
        <%= button_to "Delete", provider_account_path(pa), method: :delete, data: { confirm: "Wirklich Delete?" }, class: "rounded-md bg-red-600 text-white px-3 py-1 hover:bg-red-700" %>
      </div>
    </div>
  <% end %>
</div>

<h2 class="text-lg font-medium mb-2">Connect new network</h2>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
  <div class="p-4 border rounded-md bg-white">
    <h3 class="font-semibold mb-2">Mastodon</h3>
    <%= form_with url: provider_accounts_path, method: :post, html: { class: "space-y-2" } do %>
      <input type="hidden" name="provider" value="mastodon">
      <input class="w-full border rounded px-2 py-1" name="handle" placeholder="Handle">
      <input class="w-full border rounded px-2 py-1" name="instance" placeholder="https://deine.instanz">
      <input class="w-full border rounded px-2 py-1" name="access_token" placeholder="Access Token">
      <button class="rounded-md bg-blue-600 text-white px-3 py-1 hover:bg-blue-700">Connect</button>
    <% end %>
  </div>

  <div class="p-4 border rounded-md bg-white">
    <h3 class="font-semibold mb-2">Bluesky</h3>
    <%= form_with url: provider_accounts_path, method: :post, html: { class: "space-y-2" } do %>
      <input type="hidden" name="provider" value="bluesky">
      <input class="w-full border rounded px-2 py-1" name="handle" placeholder="Handle oder DID">
      <input class="w-full border rounded px-2 py-1" name="instance" placeholder="https://pds.domain.tld (optional)">
      <input class="w-full border rounded px-2 py-1" name="app_password" placeholder="App Password">
      <button class="rounded-md bg-blue-600 text-white px-3 py-1 hover:bg-blue-700">Connect</button>
    <% end %>
  </div>

  <div class="p-4 border rounded-md bg-white">
    <h3 class="font-semibold mb-2">Threads</h3>
    <%= link_to "Threads Connect", "/auth/threads", class: "inline-block rounded-md bg-blue-600 text-white px-3 py-1 hover:bg-blue-700", data: { turbo: false } %>
  </div>

  <div class="p-4 border rounded-md bg-white">
    <h3 class="font-semibold mb-2">Nostr</h3>
    <%= form_with url: provider_accounts_path, method: :post, html: { class: "space-y-2" } do %>
      <input type="hidden" name="provider" value="nostr">
      <input class="w-full border rounded px-2 py-1" name="handle" placeholder="Name">
      <input class="w-full border rounded px-2 py-1" name="public_key" placeholder="Pubkey (hex)">
      <button class="rounded-md bg-blue-600 text-white px-3 py-1 hover:bg-blue-700">Connect</button>
    <% end %>
  </div>
</div>


